---
title: "React18 useTransition useDeferredValue"
date: "2022-06-05"
tags: ['react', 'react18', 'useTransition']
draft: false
summary: 'React18 ëŒ€ë¹„í•˜ì useTransition'
---

import PostAccordian from '@/components/PostAccordian';

# useTransition, useDeferredValue ì´ë€?
ìš°ë¦¬ëŠ” ì¢…ì¢… ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ ë¦¬íŒ¨ì¹˜í•´ì„œ ë³´ì—¬ì¤„ ë•Œê°€ ìˆìŠµë‹ˆë‹¤. í—ˆë‚˜ ë¦¬íŒ¨ì¹˜í•˜ëŠ” ê³¼ì •ì—ì„œ ë°ì´í„°ê°€ ì‚¬ë¼ì¡Œë‹¤ê°€
ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ ë³´ì—¬ì£¼ëŠ” í˜ì´ì§€ë¥¼ ì¢…ì¢… ë³´ê²Œ ë˜ì–´ì§€ëŠ”ë° ì´ëŸ¬í•œ 'í™”ë©´ ì „í™˜ì„ ìƒëµ'í•˜ê²Œ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.

`useTransition` íŠ¹ì • ìƒíƒœ ì—…ë°ì´íŠ¸ì˜ ìš°ì„ ìˆœìœ„ê°€ ë” ë‚¯ë‹¤ëŠ” ê²ƒì„ Reactì— ì•Œë¦¬ëŠ” ë° ì‚¬ìš©

`useDeferredValue` ìœ„ì™€ ë¹„ìŠ·í•˜ë‚˜ stateí•˜ë‚˜ë¥¼ Debounce ì²˜ëŸ¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 

<PostAccordian title="Suspenseë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ì•„ë˜ì˜ ì„¸íŒ…ì´ í•„ìš”í•©ë‹ˆë‹¤.">
  1. render stream ë°©ì‹ì„ `renderToPipeableStream` ë¡œ ë³€ê²½ <br/>
  &nbsp;&nbsp;renderToString: Keeps working (with limited Suspense support) <br/>
  &nbsp;&nbsp;renderToNodeStream: Deperecated (with full Suspense support, but without streaming) <br/>
  &nbsp;&nbsp;renderToPipeableStream: New and recommended (with full Suspense support and streaming) <br/>

  2. ì•„ë˜ì™€ ê°™ì´ createRootë¡œ ë³€ê²½
  ```javascript
  const rootElement = document.getElementById("root");
  ReactDOM.createRoot(rootElement).render(<App />);
  ```
</PostAccordian>

## useTransition ì‚¬ìš©ë²•
`const [isPending, startTransition] = useTransition();` ì²« ë²ˆì§¸ ì¸ìë¡œëŠ” pendingìƒíƒœë¥¼ í™•ì¸í•  ìˆ˜ ìˆê³ 
startTransitionìœ¼ë¡œ ê°ì‹¸ëŠ”ê±¸ í†µí•´ ì—…ë°ì´íŠ¸ ìš°ì„ ìˆœìœ„ë¥¼ ë‚®ì¶¥ë‹ˆë‹¤.
```javascript
const [state1, setState1] = useState(true);
const [state2, setState2] = useState(false);
const [isPending, startTransition] = useTransition({ timeoutMs: 3000 });

const handler = () => {
  setState1(!state1);
  startTransition(() => setState2(!state2));
}
```

## useDeferredValue ì‚¬ìš©ë²•
debounceì²˜ëŸ¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
```javscript
const [textState, setTextState] = useState('');
const query = React.useDeferredValue(textState, { timeoutMs: 3000 });
```


ğŸ‘‡ ì „ì²´ useDeferredValue ì˜ˆì œ ì½”ë“œ

<iframe src="https://codesandbox.io/embed/jolly-danny-rvuqhw?fontsize=14&hidenavigation=1&theme=dark"
     style={{width: '100%', height: '500px', border: 'none', borderRadius: '4px', overflow: 'hidden'}}
     title="jolly-danny-rvuqhw"
     allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"
     sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"
   ></iframe>

<br/><br/>

React18 ì»¨ì…‰ CONCURRENCY ì— ë§ê²Œ state ì§€ì—°ë„ ì§€ì›í•´ì£¼ëŠ”ê²Œ ë„ˆë¬´ í¸í•˜ê³  ì¢‹ì€ ê²ƒ ê°™ìŠµë‹ˆë‹¤.

